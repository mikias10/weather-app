"use strict";angular.module("architechApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.select","chart.js","highcharts-ng","selectize"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/weather.html",controller:"weatherCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("architechApp").controller("weatherCtrl",["$scope","weatherService","$filter",function(a,b,c){a.press=[],a.ave="",a.total=0;var d;a.time_array=[],a.temp_array=[],a.cityName="_____________",a.askWeather=function(e){a.cityName=a.city,a.time_array=[],a.temp_array=[],a.total=0,a.ave="",d=0,b.getWeather(e).then(function(b){console.log(b),a.list=b,console.log(a.list),a.list.forEach(function(b){a.press.push(b.main.pressure)});var e,f;for(a.listSkipped=[],e=0;e<a.list.length;e+=4){a.listSkipped.push(a.list[e]);var g=new Date(1e3*a.list[e].dt),h=c("date")(g,"short");a.time_array.push(h),a.temp_array.push(a.list[e].main.temp)}for(f=0;f<a.press.length;f++)a.total=a.total+a.press[f];d=a.total/a.press.length,a.ave=d.toFixed(2),console.log(a.ave)}),a.options={responsive:!0,maintainAspectRatio:!0},a.labels=a.time_array,console.log(a.labels),a.series=["Days vs Temperature"],a.data=[a.temp_array],a.onClick=function(a,b){console.log(a,b)},a.press=[],a.city=""}}]),angular.module("architechApp").factory("weatherService",["$http","$q",function(a,b){function c(c){var d=b.defer();return a.get("http://api.openweathermap.org/data/2.5/forecast/city?q="+c+"&units=metric&mo?callback=JSON_CALLBACK").success(function(a){d.resolve(a.list)}).error(function(a){console.log("Weather data not available"),d.reject(a)}),d.promise}return{getWeather:c}}]);